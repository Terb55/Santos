/**
 * animations.css
 * 
 * Keyframe animations and motion utilities.
 * All animations are purposeful and guide user attention.
 */

/* ============================================
   Landing Section Animations
   ============================================ */

/* Staggered title line entrance */
.landing-title .title-line {
    display: block;
    opacity: 0;
    transform: translateY(20px);
    animation: slideUpFade 0.8s var(--ease-out) forwards;
}

.landing-title .title-line:nth-child(1) {
    animation-delay: 0.1s;
}

.landing-title .title-line:nth-child(2) {
    animation-delay: 0.25s;
}

.landing-subtitle {
    opacity: 0;
    transform: translateY(20px);
    animation: slideUpFade 0.8s var(--ease-out) 0.4s forwards;
}

.section-landing .btn-primary {
    opacity: 0;
    transform: translateY(20px);
    animation: slideUpFade 0.8s var(--ease-out) 0.55s forwards;
}

@keyframes slideUpFade {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Scroll Indicator */
.scroll-indicator {
    position: absolute;
    bottom: var(--space-8);
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    opacity: 0;
    animation: fadeIn 0.6s var(--ease-out) 1s forwards;
}

/* Scroll indicator in page-container layout */
.landing-hero .scroll-indicator {
    position: relative;
    bottom: auto;
    left: auto;
    transform: none;
    margin-top: var(--space-8);
}

.scroll-indicator span {
    font-size: var(--text-xs);
    color: var(--text-tertiary);
    letter-spacing: var(--tracking-wide);
    text-transform: uppercase;
}

.scroll-line {
    width: 1px;
    height: 40px;
    background: linear-gradient(
        to bottom,
        var(--text-tertiary),
        transparent
    );
    animation: scrollPulse 2s var(--ease-in-out) infinite;
}

@keyframes scrollPulse {
    0%, 100% {
        opacity: 0.3;
        transform: scaleY(1);
    }
    50% {
        opacity: 1;
        transform: scaleY(1.2);
    }
}

@keyframes fadeIn {
    to {
        opacity: 1;
    }
}

/* ============================================
   PC Visualization Animation
   Components "assemble" on the landing page
   ============================================ */
.pc-visualization {
    width: 300px;
    height: 300px;
    position: relative;
    perspective: 1000px;
}

.pc-component {
    position: absolute;
    border-radius: var(--radius-lg);
    opacity: 0;
    transition: 
        transform 0.6s var(--ease-out),
        opacity 0.6s var(--ease-out);
}

/* PC Case - Main structure */
.pc-case {
    width: 200px;
    height: 260px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%) rotateY(-15deg) rotateX(5deg);
    background: linear-gradient(
        135deg,
        var(--gray-200),
        var(--gray-300)
    );
    border: 2px solid var(--gray-400);
    animation: caseAssemble 1s var(--ease-out) 0.2s forwards;
}

[data-theme="dark"] .pc-case {
    background: linear-gradient(
        135deg,
        var(--gray-700),
        var(--gray-800)
    );
    border-color: var(--gray-600);
}

.component-glow {
    position: absolute;
    inset: -20px;
    background: radial-gradient(
        ellipse at center,
        var(--glow-primary),
        transparent 70%
    );
    opacity: 0;
    animation: glowPulse 3s var(--ease-in-out) infinite;
    animation-delay: 1.5s;
}

@keyframes caseAssemble {
    from {
        opacity: 0;
        transform: translate(-50%, -50%) rotateY(-30deg) rotateX(10deg) scale(0.8);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -50%) rotateY(-15deg) rotateX(5deg) scale(1);
    }
}

/* Internal components slide in */
.pc-motherboard {
    width: 140px;
    height: 160px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -45%);
    background: linear-gradient(
        180deg,
        var(--gray-600),
        var(--gray-700)
    );
    animation: componentSlideIn 0.6s var(--ease-out) 0.5s forwards;
}

.pc-cpu {
    width: 40px;
    height: 40px;
    left: 50%;
    top: 35%;
    transform: translate(-50%, -50%);
    background: linear-gradient(
        135deg,
        var(--gray-500),
        var(--gray-600)
    );
    animation: componentSlideIn 0.5s var(--ease-out) 0.7s forwards;
}

.pc-gpu {
    width: 120px;
    height: 30px;
    left: 50%;
    top: 65%;
    transform: translate(-50%, -50%);
    background: linear-gradient(
        90deg,
        var(--primary-500),
        var(--primary-600)
    );
    animation: componentSlideIn 0.6s var(--ease-out) 0.9s forwards;
}

.pc-ram {
    width: 80px;
    height: 12px;
    left: 50%;
    top: 48%;
    transform: translate(-50%, -50%);
    background: linear-gradient(
        90deg,
        var(--accent-cyan),
        var(--accent-emerald)
    );
    animation: componentSlideIn 0.5s var(--ease-out) 1.1s forwards;
}

.pc-storage,
.pc-psu,
.pc-cooling {
    display: none; /* Simplified visualization */
}

@keyframes componentSlideIn {
    from {
        opacity: 0;
        transform: translate(-50%, -50%) translateZ(-30px);
    }
    to {
        opacity: 0.9;
        transform: translate(-50%, -50%) translateZ(0);
    }
}

@keyframes glowPulse {
    0%, 100% {
        opacity: 0.3;
    }
    50% {
        opacity: 0.6;
    }
}

/* ============================================
   Analyzing State Animations
   ============================================ */
.analyzing-visual {
    position: relative;
    width: 300px;
    height: 200px;
}

/* Pulse rings emanate from center */
.pulse-rings {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.pulse-ring {
    position: absolute;
    width: 100px;
    height: 100px;
    border: 2px solid var(--primary-500);
    border-radius: 50%;
    opacity: 0;
    animation: pulseExpand 2s var(--ease-out) infinite;
}

.pulse-ring:nth-child(2) {
    animation-delay: 0.6s;
}

.pulse-ring:nth-child(3) {
    animation-delay: 1.2s;
}

@keyframes pulseExpand {
    0% {
        transform: scale(0.5);
        opacity: 0.8;
    }
    100% {
        transform: scale(2.5);
        opacity: 0;
    }
}

/* Neural Network SVG */
.neural-svg {
    width: 100%;
    height: 100%;
}

.neural-node {
    fill: var(--primary-500);
    opacity: 0.6;
    animation: nodeGlow 1.5s var(--ease-in-out) infinite alternate;
}

.neural-node:nth-child(odd) {
    animation-delay: 0.3s;
}

.neural-connection {
    stroke: var(--primary-400);
    stroke-width: 1;
    opacity: 0.3;
    animation: connectionFlow 2s linear infinite;
}

@keyframes nodeGlow {
    from {
        opacity: 0.4;
        r: 4;
    }
    to {
        opacity: 0.9;
        r: 6;
    }
}

@keyframes connectionFlow {
    from {
        stroke-dashoffset: 20;
    }
    to {
        stroke-dashoffset: 0;
    }
}

/* Analyzing Steps */
.analyzing-content {
    text-align: center;
}

.analyzing-title {
    font-size: var(--text-2xl);
    margin-bottom: var(--space-8);
}

.analyzing-steps {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    text-align: left;
    max-width: 320px;
    margin: 0 auto;
}

.analyze-step {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    opacity: 0.4;
    transition: opacity var(--duration-base) var(--ease-out);
}

.analyze-step.active {
    opacity: 1;
}

.analyze-step.complete {
    opacity: 0.7;
}

.step-indicator {
    width: 24px;
    height: 24px;
    position: relative;
}

.step-check {
    position: absolute;
    inset: 0;
    opacity: 0;
    color: var(--color-success);
    transition: opacity var(--duration-fast) var(--ease-out);
}

.analyze-step.complete .step-check {
    opacity: 1;
}

.step-spinner {
    position: absolute;
    inset: 0;
    border: 2px solid var(--border-default);
    border-top-color: var(--primary-500);
    border-radius: 50%;
    opacity: 0;
}

.analyze-step.active .step-spinner {
    opacity: 1;
    animation: spin 0.8s linear infinite;
}

.analyze-step.complete .step-spinner {
    opacity: 0;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.analyze-step span {
    font-size: var(--text-sm);
    color: var(--text-secondary);
}

.analyze-step.active span {
    color: var(--text-primary);
    font-weight: var(--font-medium);
}

/* ============================================
   Option Card Entrance Animation
   ============================================ */
.options-grid .option-card {
    opacity: 0;
    transform: translateY(20px);
}

.section.active .options-grid .option-card {
    animation: cardEntrance 0.5s var(--ease-out) forwards;
}

.section.active .options-grid .option-card:nth-child(1) { animation-delay: 0.1s; }
.section.active .options-grid .option-card:nth-child(2) { animation-delay: 0.15s; }
.section.active .options-grid .option-card:nth-child(3) { animation-delay: 0.2s; }
.section.active .options-grid .option-card:nth-child(4) { animation-delay: 0.25s; }
.section.active .options-grid .option-card:nth-child(5) { animation-delay: 0.3s; }
.section.active .options-grid .option-card:nth-child(6) { animation-delay: 0.35s; }

@keyframes cardEntrance {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Priority List Entrance */
.priority-list .priority-item {
    opacity: 0;
    transform: translateX(-20px);
}

.section.active .priority-list .priority-item {
    animation: slideInLeft 0.5s var(--ease-out) forwards;
}

.section.active .priority-list .priority-item:nth-child(1) { animation-delay: 0.1s; }
.section.active .priority-list .priority-item:nth-child(2) { animation-delay: 0.15s; }
.section.active .priority-list .priority-item:nth-child(3) { animation-delay: 0.2s; }
.section.active .priority-list .priority-item:nth-child(4) { animation-delay: 0.25s; }
.section.active .priority-list .priority-item:nth-child(5) { animation-delay: 0.3s; }

@keyframes slideInLeft {
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* ============================================
   Background Response to Interaction
   ============================================ */
.ambient-background.interacting .orb-1 {
    transform: translate(20px, 10px);
}

.ambient-background.interacting .orb-2 {
    transform: translate(-15px, -10px);
}

.ambient-background.analyzing .orb-1,
.ambient-background.analyzing .orb-2 {
    animation: orbFloat 4s var(--ease-in-out) infinite alternate;
}

.ambient-background.analyzing .orb-3 {
    opacity: 0.4;
    animation: orbPulse 2s var(--ease-in-out) infinite;
}

@keyframes orbFloat {
    from {
        transform: translate(0, 0);
    }
    to {
        transform: translate(30px, -20px);
    }
}

@keyframes orbPulse {
    0%, 100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.2;
    }
    50% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 0.4;
    }
}

/* ============================================
   Results Reveal Animation
   ============================================ */
.section-results .results-badge {
    opacity: 0;
    transform: translateY(10px);
}

.section-results.active .results-badge {
    animation: slideUpFade 0.5s var(--ease-out) 0.1s forwards;
}

.section-results .results-title {
    opacity: 0;
    transform: translateY(10px);
}

.section-results.active .results-title {
    animation: slideUpFade 0.5s var(--ease-out) 0.2s forwards;
}

.section-results .results-summary {
    opacity: 0;
    transform: translateY(10px);
}

.section-results.active .results-summary {
    animation: slideUpFade 0.5s var(--ease-out) 0.3s forwards;
}

.section-results .build-card {
    opacity: 0;
    transform: translateY(20px);
}

.section-results.active .build-card {
    animation: slideUpFade 0.6s var(--ease-out) 0.4s forwards;
}

.section-results .insights-panel {
    opacity: 0;
    transform: translateX(20px);
}

.section-results.active .insights-panel {
    animation: slideInRight 0.6s var(--ease-out) 0.5s forwards;
}

@keyframes slideInRight {
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Button hover ripple effect */
.btn-primary::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), rgba(255,255,255,0.3), transparent 50%);
    opacity: 0;
    transition: opacity var(--duration-fast) var(--ease-out);
    border-radius: inherit;
    pointer-events: none;
}

.btn-primary:hover::after {
    opacity: 1;
}